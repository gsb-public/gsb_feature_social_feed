(function ($) {

  /**
   * Check for social field fpp, if it exists, check the source.
   * If the source is twitter, grab the values from fields and
   * transmit them to gsb_tweetfeed function.
   */
  Drupal.behaviors.social_feed = {
    attach: function () {
      var socialWrapper = $('.pane-bundle-social-feed');
      if (socialWrapper.length > 0 && !socialWrapper.hasClass('processed')) {
        var _source = socialWrapper.find('.field-name-field-feed-source').text();
        if ( _source.toLowerCase() == 'twitter') {
          // Get tweets number and search query.
          var _length = socialWrapper.find('.field-name-field-social-display-num').text(),
            _search = socialWrapper.find('.field-name-field-twitter-search').text();

          // Initialize twitterfeed.js function.
          gsb_tweetfeed.init({
            search: _search,
            numTweets: _length,
            appendTo: '.pane-bundle-social-feed'
          });
        }
      }
    }
  };

}(jQuery));
